; Generated with  (https://github.com/laurentlb/Shader_Minifier/)
_var_RESOLUTION: db 'n', 0
_var_TEX0: db 'f', 0
_var_TEX1: db 'm', 0
_var_TEX2: db 'o', 0
_var_TEX3: db 'y', 0
_var_TIME: db 'v', 0

_leizex_frag:
	db '#extension GL_EXT_gpu_shader4:enable', 10, ''
	db 'uniform vec2 n;'
	db 'uniform float v;'
	db 'uniform sampler2D f,m,o,y;'
	db 'float t(int v)'
	db '{'
	db   'v^=v<<13;'
	db   'v=v*(v*v*15731+789221)+1376312589&2147483647;'
	db   'return float(v);'
	db '}'
	db 'float t(vec3 v,int f)'
	db '{'
	db   'ivec3 n=ivec3(floor(v));'
	db   'vec3 x=fract(v);'
	db   'x=x*x*(3.-2.*x);'
	db   'f+=n.x+n.y*57+113*n.z;'
	db   'float y=mix(mix(mix(t(f),t(f+1),x.x),mix(t(f+57),t(f+58),x.x),x.y),mix(mix(t(f+113),t(f+114),x.x),mix(t(f+170),t(f+171),x.x),x.y),x.z);'
	db   'return 1.-y*(1/1073741824.);'
	db '}'
	db 'vec2 s(vec3 v)'
	db '{'
	db   'ivec3 f=ivec3(floor(v));'
	db   'vec3 x=fract(v);'
	db   'vec2 n=vec2(1);'
	db   'for(int v=-1;v<=1;v++)'
	db     'for(int y=-1;y<=1;y++)'
	db       'for(int i=-1;i<=1;i++)'
	db         '{'
	db           'int c=f.x+i+57*(f.y+y)+113*(f.z+v);'
	db           'vec3 m=vec3(float(i),float(y),float(v))-x+vec3(t(c),t(c+1217),t(c+2513))/2147483647.;'
	db           'float s=dot(m,m);'
	db           'if(s<n.x)'
	db             'n.y=n.x,n.x=s;'
	db           'else if(s<n.y)'
	db             'n.y=s;'
	db         '}'
	db   'return.25*sqrt(n);'
	db '}'
	db 'float c(vec3 v)'
	db '{'
	db   'return.5*t(v,0)+.25*t(v*2.,0)+.125*t(v*4.,0)+.0625*t(v*8.,0);'
	db '}'
	db 'float c(vec3 v,out float x)'
	db '{'
	db   'vec3 f=mod(vec3(1024)+v,1.)-.5;'
	db   'float y=sqrt(dot(f,f))-.09,c=t(4.*v,0);'
	db   'y+=.8*c;'
	db   'x=clamp(-1.5*c,0.,1.);'
	db   'vec2 i=s(16.*v);'
	db   'c=clamp(i[1]-i[0],0.,1.);'
	db   'y-=c;'
	db   'x*=clamp(c*12.,0.,1.);'
	db   'return y;'
	db '}'
	db 'vec3 x(vec3 v)'
	db '{'
	db   'float x;'
	db   'vec3 f=vec3(c(v+vec3(2e-4,0,0),x)-c(v-vec3(2e-4,0,0),x),c(v+vec3(0,2e-4,0),x)-c(v-vec3(0,2e-4,0),x),c(v+vec3(0,0,2e-4),x)-c(v-vec3(0,0,2e-4),x));'
	db   'return normalize(f);'
	db '}'
	db 'void c(out vec3 v,out vec3 x,vec2 f,float y)'
	db '{'
	db   'vec2 n=f;'
	db   'float c=n.x*n.x*.32+n.y*n.y;'
	db   'n=n*(7.-sqrt(37.5-11.5*c))/(c+1.);'
	db   'vec3 i=vec3(0,1.5,2);'
	db   'x=i+vec3(-sin(6.2831853*y/20.),.75*cos(6.2831853*y/20.+.5),-cos(6.2831853*y/20.));'
	db   'i+=.075*vec3(t(vec3(2.*y,0,.5),0),t(vec3(2.*y,.1,.4),7),t(vec3(2.*y,.2,.3),9));'
	db   'c=.1*t(vec3(2.*y,0,0),13);'
	db   'i=normalize(i-x);'
	db   'vec3 m=normalize(cross(i,vec3(0,cos(c),sin(c))));'
	db   'v=normalize(n.x*m+n.y*normalize(cross(m,i))+i);'
	db '}'
	db 'vec3 s(vec3 v,vec3 f)'
	db '{'
	db   'float x=c(256.*f);'
	db   'return normalize(v+vec3(c(256.*(f+vec3(5e-4,0,0)))-x,c(256.*(f+vec3(0,5e-4,0)))-x,c(256.*(f+vec3(0,0,5e-4)))-x));'
	db '}'
	db 'void main()'
	db '{'
	db   'vec2 f=-1.+2.*gl_FragCoord.xy/n.xy;'
	db   'vec3 y,m;'
	db   'c(m,y,f,v);'
	db   'float i,t;'
	db   'vec3 r,o;'
	db   'for(i=.1;i<5.;)'
	db     '{'
	db       'o=y+i*m;'
	db       'float v=c(o,t);'
	db       'if(v<.001)'
	db         'break;'
	db       'i+=v*.12;'
	db     '}'
	db   'r=x(o);'
	db   'y=vec3(1.+.5*c(96.*o));'
	db   'r=s(r,.25*o);'
	db   'y=y*(vec3(.5,.55,.6)+vec3(.6,.5,.3)*clamp(dot(r,vec3(.8,.5,-.1)),0.,1.)*3.)*t/(1.+i)+vec3(1.06,1.14,1)*(1.-exp2(-.25*i));'
	db   'y=clamp((y*y+y)*.5*vec3(1,1.2,1),0.,1.)*(.5+.5*(1.-f.x)*(1.+f.x));'
	db   'gl_FragColor=vec4(y,1);'
	db '}', 0
